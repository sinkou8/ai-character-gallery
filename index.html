<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Bromide Collection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Shippori+Mincho&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Shippori Mincho', 'Noto Serif JP', serif; background-color: #1a1a1a; color: #f3f4f6; margin: 0; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .bromide-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .bromide-card:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.4); }
        .gold-gradient-text { background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c); -webkit-background-clip: text; background-clip: text; color: transparent; }
        .modal-content { animation: modalFadeIn 0.3s ease-out forwards; }
        @keyframes modalFadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-b from-gray-900 to-black">

    <header class="w-full text-center mb-6 fade-in">
        <h1 class="text-3xl md:text-5xl font-bold tracking-widest gold-gradient-text mb-2">BROMIDE COLLECTION</h1>
        <p class="text-gray-400 text-xs md:text-sm tracking-wider mb-4">OFFICIAL VISUAL ARCHIVE</p>
    </header>

    <main class="w-full max-w-7xl relative">
        <button id="scrollLeft" class="hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 hover:bg-black/80 text-white p-3 rounded-full backdrop-blur-sm transition-all -ml-4 border border-white/10"><svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.75 19.5L8.25 12l7.5-7.5" /></svg></button>
        <button id="scrollRight" class="hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 hover:bg-black/80 text-white p-3 rounded-full backdrop-blur-sm transition-all -mr-4 border border-white/10"><svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg></button>
        <div id="galleryContainer" class="flex overflow-x-auto gap-6 pb-12 pt-4 px-4 md:px-12 snap-x snap-mandatory no-scrollbar scroll-smooth"></div>
    </main>

    <footer class="mt-auto text-gray-600 text-xs text-center py-4"><p>© Character Archive. All Rights Reserved.</p></footer>

    <!-- Lightbox -->
    <div id="lightbox" class="fixed inset-0 z-50 bg-black/95 backdrop-blur-md hidden flex items-center justify-center p-4 opacity-0 transition-opacity duration-300 overflow-y-auto">
        <div class="modal-content relative w-full max-w-4xl flex flex-col items-center justify-center my-auto h-auto md:h-screen py-8">
            <button id="closeLightbox" class="absolute top-2 right-0 md:-right-12 z-50 text-white/70 hover:text-white transition-colors p-2 bg-black/50 md:bg-transparent rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
            <div class="w-full flex-1 flex items-center justify-center relative rounded-lg overflow-hidden"><img id="lightboxImg" src="" alt="Profile" class="max-w-full max-h-[75vh] object-contain drop-shadow-2xl rounded"></div>
            <div class="w-full mt-6 flex flex-col items-center text-center">
                <p id="profileSub" class="text-sm text-yellow-500 tracking-[0.4em] font-sans mb-2 font-light opacity-90"></p>
                <h2 id="profileName" class="text-3xl md:text-5xl text-white font-bold tracking-widest font-serif shadow-black drop-shadow-lg"></h2>
            </div>
        </div>
    </div>

    <script>
        // ▼▼▼ 設定エリア ▼▼▼
        const bromides = [
            { name: "御影 孝司", sub: "MIKAGE TAKASHI", position: 'object-top' },
            { name: "夜野 弥斗", sub: "YANO MITO", position: 'object-top' },
            { name: "橘 悠真", sub: "TACHIBANA YUMA", position: 'object-top' },
            { name: "西条 陸", sub: "SAIJO RIKU", position: 'object-top' },
            { name: "真神 司", sub: "MAGAMI TSUKASA", position: 'object-top' },
            { name: "黒崎 漣", sub: "KUROSAKI REN", position: 'object-top' },
            { name: "海堂 カイ", sub: "KAIDO KAI", position: 'object-top' },
            { name: "速水 駿", sub: "HAYAMI SHUN", position: 'object-top' },
            { name: "神園 ひろむ", sub: "KAMIZONO HIROMU", position: 'object-top' },
            { name: "篠原 玲央", sub: "SHINOHARA REO", position: 'object-right' },
            { name: "朝倉 春", sub: "ASAKURA HARU", position: 'object-top' },
            { name: "霧島 空", sub: "KIRISHIMA SORA", position: 'object-right' },
        ];

        const galleryContainer = document.getElementById('galleryContainer');
        const scrollLeftBtn = document.getElementById('scrollLeft');
        const scrollRightBtn = document.getElementById('scrollRight');
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxTitle = document.getElementById('profileName');
        const lightboxSub = document.getElementById('profileSub');
        const closeLightbox = document.getElementById('closeLightbox');

        // ★★★ 全自動ファイル検索ロジック ★★★
        // 全角・半角スペース、スペースなし、PNG/JPG/JPEG をすべて試します
        function generateFileCandidates(name) {
            const candidates = [];
            // 名前のバリエーション
            const nameBase = name;
            const nameWide = name.replace(/ /g, '　'); // 全角スペース
            const nameNarrow = name.replace(/　/g, ' '); // 半角スペース
            const nameNoSpace = name.replace(/[ 　]/g, ''); // スペースなし

            const nameVariations = Array.from(new Set([nameBase, nameWide, nameNarrow, nameNoSpace]));
            const extensions = ['.png', '.jpg', '.jpeg', '.PNG', '.JPG', '.JPEG'];

            // 組み合わせ生成
            nameVariations.forEach(n => {
                extensions.forEach(ext => {
                    candidates.push(n + ext);
                });
            });
            return candidates;
        }

        function loadImageWithFallback(imgElement, name) {
            const candidates = generateFileCandidates(name);
            let attemptIndex = 0;

            function tryNext() {
                if (attemptIndex >= candidates.length) {
                    // 全て失敗した場合
                    imgElement.onerror = null;
                    if (imgElement.parentElement) {
                        const existing = imgElement.parentElement.querySelector('.error-msg');
                        if(existing) existing.remove();
                        const overlay = document.createElement('div');
                        overlay.className = 'error-msg absolute inset-0 flex items-center justify-center bg-gray-900 text-gray-500 text-xs p-4 text-center z-20 pointer-events-none border-2 border-red-500/30 m-2 rounded';
                        overlay.innerHTML = `<div>Not Found<br><span class="scale-75 block opacity-50">(${name})</span></div>`;
                        imgElement.parentElement.appendChild(overlay);
                    }
                    return;
                }

                const src = candidates[attemptIndex];
                imgElement.src = src;
                attemptIndex++;
            }

            imgElement.onerror = function() {
                tryNext();
            };

            // 初回実行
            tryNext();
        }

        function renderGallery() {
            galleryContainer.innerHTML = '';
            bromides.forEach((item) => {
                const card = document.createElement('div');
                card.className = "min-w-[280px] w-[300px] md:min-w-[320px] md:w-[320px] snap-center flex-shrink-0 flex flex-col items-center group cursor-pointer relative";
                card.onclick = () => openLightbox(item);

                const imgPosition = item.position ? item.position : 'object-top';

                card.innerHTML = `
                    <div class="relative w-full aspect-[3/4] rounded-lg overflow-hidden border border-white/10 shadow-lg bromide-card bg-gray-800">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent opacity-60 z-10 pointer-events-none"></div>
                        <img 
                            alt="${item.name}" 
                            class="w-full h-full object-cover ${imgPosition} transition-transform duration-700 group-hover:scale-110"
                        >
                        <div class="absolute bottom-0 left-0 right-0 pb-6 px-4 z-20 transform translate-y-1 group-hover:translate-y-0 transition-transform duration-300 w-full text-center pointer-events-none">
                            <h2 class="text-xl md:text-2xl text-white font-serif tracking-widest border-b border-yellow-500/50 pb-2 inline-block shadow-black drop-shadow-md">${item.name}</h2>
                        </div>
                        <div class="absolute inset-0 bg-gradient-to-tr from-white/0 via-white/10 to-white/0 opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-500 z-30"></div>
                    </div>
                `;
                
                const img = card.querySelector('img');
                loadImageWithFallback(img, item.name); // 自動検索スタート

                galleryContainer.appendChild(card);
            });
        }

        function openLightbox(item) {
            loadImageWithFallback(lightboxImg, item.name);
            lightboxTitle.innerText = item.name;
            lightboxSub.innerText = item.sub;
            
            lightbox.classList.remove('hidden');
            setTimeout(() => { lightbox.classList.remove('opacity-0'); }, 10);
            document.body.style.overflow = 'hidden';
        }

        function closeLightboxModal() {
            lightbox.classList.add('opacity-0');
            setTimeout(() => {
                lightbox.classList.add('hidden');
                lightboxImg.src = '';
            }, 300);
            document.body.style.overflow = '';
        }

        closeLightbox.addEventListener('click', closeLightboxModal);
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox || e.target.classList.contains('modal-content')) return; 
            if (e.target === lightbox) closeLightboxModal();
        });
        scrollLeftBtn.addEventListener('click', () => { galleryContainer.scrollBy({ left: -340, behavior: 'smooth' }); });
        scrollRightBtn.addEventListener('click', () => { galleryContainer.scrollBy({ left: 340, behavior: 'smooth' }); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeLightboxModal(); });

        renderGallery();
    </script>
</body>
</html>
